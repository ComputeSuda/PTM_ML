[gh-actions]
python =
    3.7: py37, rst_linux, rst_mac, readme, linters, coverage-report, qa

[tox]
envlist = py37, linters

[testenv:linters]
deps =
    numpy
    scipy
    pytest
    flake8
    flake8-docstrings
    flake8-import-order>=0.9
    flake8-colors
    pep8-naming
    pylint
    # black
    bandit
commands =
    flake8 PTMFun/*/*
    pylint PTMFun --rcfile=tox.ini --disable=similarities

ignore_errors = true


# flake8 configuration
[flake8]
exclude =
    __init__.py,
    .tox,
    .git,
    __pycache__,
    build,
    dist,
    *.pyc,
    *.egg-info,
    .cache,
    .eggs,

max-line-length = 100
import-order-style = google
ignore =
    # E121 : continuation line under-indented for hanging indent
    E121,
    # E123 : closing bracket does not match indentation of opening bracket’s line
    E123,
    # E126 : continuation line over-indented for hanging indent
    E126,
    # E226 : missing whitespace around arithmetic operator
    E226,
    # E241 : multiple spaces after ‘,’
    # E242 : tab after ‘,’
    E24,
    # E704 : multiple statements on one line (def)
    E704,
    # W503 : line break occurred before a binary operator
    W503,
    # W504 : Line break occurred after a binary operator
    W504,
    # D202: No blank lines allowed after function docstring
    D202,
    # E203: Whitespace before ':'
    E203,
    # E731: Do not assign a lambda expression, use a def
    E731,

# doc8 configuration
[doc8]
# Ignore target directories and autogenerated files
ignore-path = docs/_build/, build/, src.egg-info/, qc_src.egg-info, .*/, docs/intro_about.rst
# File extensions to use
extensions = .rst, .txt
# Maximal line length should be 100
max-line-length = 100
# Disable some doc8 checks:
# D000: Check RST validity (cannot handle the "linenos" directive)
# D002: Trailing whitespace
# D004: Found literal carriage return
# Both D002 and D004 can be problematic in Windows platform, line ending is `\r\n`,
# but in Linux and MacOS, it's "\n"
# Known issue of doc8, https://bugs.launchpad.net/doc8/+bug/1756704
# ignore = D000,D002,D004
ignore = D000

# pylint configuration
[MASTER]
# This is a known issue of pylint with recognizing numpy members
# https://github.com/PyCQA/pylint/issues/779
# https://stackoverflow.com/questions/20553551/how-do-i-get-pylint-to-recognize-numpy-members
extension-pkg-whitelist=numpy

[FORMAT]
# Maximum number of characters on a single line.
max-line-length=100

[MESSAGES CONTROL]
disable=
    # attribute-defined-outside-init (W0201):
    # Attribute %r defined outside __init__ Used when an instance attribute is
    # defined outside the __init__ method.
    W0201,
    # too-many-instance-attributes (R0902):
    # Too many instance attributes (%s/%s) Used when class has too many instance
    # attributes, try to reduce this to get a simpler (and so easier to use)
    # class.
    R0902,
    # too many branches (R0912)
    R0912,
    # too-many-arguments (R0913):
    # Too many arguments (%s/%s) Used when a function or method takes too many
    # arguments.
    R0913,
    # Too many local variables (r0914)
    R0914,
    # Too many statements (R0915)
    R0915,
    # fixme (W0511):
    # Used when a warning note as FIXME or XXX is detected.
    W0511,
    # bad-continuation (C0330):
    # Wrong hanging indentation before block (add 4 spaces).
    C0330,
    # wrong-import-order (C0411):
    # %s comes before %s Used when PEP8 import order is not respected (standard
    # imports first, then third-party libraries, then local imports)
    C0411,
    # arguments-differ (W0221):
    # Parameters differ from %s %r method Used when a method has a different
    # number of arguments than in the implemented interface or in an overridden
    # method.
    W0221,
    # unecessary "else" after "return" (R1705)
    R1705,
    # Value XX is unsubscriptable (E1136). this is a open issue of pylint
    # https://github.com/PyCQA/pylint/issues/3139
    E1136,
    # Used when a name doesn't doesn't fit the naming convention associated to its type
    # (constant, variable, class…).
    C0103,

[SIMILARITIES]
min-similarity-lines=5

# coverage configuration
[run]
branch = True
parallel = True
source = PTMFun

[paths]
source =
    PTMFun/*/*
   .tox/*/lib/python*/site-packages/src
   .tox/pypy*/site-packages/src
